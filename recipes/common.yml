---
# yaml-language-server: $schema=https://schema.blue-build.org/module-list-v1.json

modules:
  # 1. Repositories and Kernel Configurations (Stable Base)
  - from-file: common-system-repos.yml
  - from-file: common-kernel-args.yml

  # 2. Driver Layer (Heavy - changes with system updates)
  - from-file: packages-drivers.yml

  # 3. Core Layer (Stable - changes rarely)
  - from-file: common-system-debloat.yml
  - from-file: common-system-packages.yml
  - from-file: common-virtualization-kvm.yml
  - from-file: common-systemd-services.yml

  # 4. Tooling Layer (Light - changes frequently)
  - from-file: packages-tools.yml

  # 5. Configurations (Files) - Placed at the end to protect previous layers
  # Editing a config file won't require a full driver rebuild!
  - type: files
    files:
      - source: system
        destination: /

  # 6. Flatpaks (Final application layer)
  # - from-file: common-user-flatpaks.yml
